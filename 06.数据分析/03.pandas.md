# pandas

## 1.`Series`

> `Series`一维，带标签数组

### 1. 了解

```python
import pandas as pd

t = pd.Series([1,5,6,7,91,10,20,52,65])
print(t)
# 打印结果如下
0     1
1     5
2     6
3     7
4    91
5    10
6    20
7    52
8    65
dtype: int64


t1 = pd.Series([1,23,2,2,1],index=list("abcde"))
print(t1)
# 打印结果如下
a     1
b    23
c     2
d     2
e     1
dtype: int64
    
temp_dict = {"name":"小米","age":30,"tel":10086}
t3 = pd.Series(temp_dict)
print(t3)
# 打印结果如下
name       小米
age        30
tel     10086
dtype: object
```

```python
# 修改类型
t2.astype(float)
# 取值
t3["age"]	# 30
t3["tel"]	# 10086
t3[0]		# "小米"
t3[2]		# 10086
t3[:2]		# 取连续的值
# 打印结果如下
name    小米
age     30
dtype: object
t3[[1,2]]	# 取不连续的值或者 t3[["age","tel"]]
# 打印结果如下
age       30
tel    10086
dtype: object
# 取出t>4
t[t>4]
```

### 2.属性

+ t.index

  ```python
  t3.index	# Index(['name', 'age', 'tel'], dtype='object')
  for i in t3.index:
      print(i)
  # 打印结果如下
  name
  age
  tel
  
  type(t3.index)	# pandas.core.indexes.base.Index
  ```

+ t.values

  ```python
  t3.values	# array(['小米', 30, 10086], dtype=object)
  type(t3.values)	# numpy.ndarray
  
  ```

+ where

### 3.切片

> 直接传入start end或者步长即可

### 4.索引

> 一个的时候直接传入序号或者index，多个的时候传入序号或者index的列表

## 2.读取外部数据

> read_csv		read_sql		

```python
# coding=utf-8
import pandas as pd

#pandas读取csv中的文件
df = pd.read_csv("./dogNames2.csv")

print(df[(800<df["Count_AnimalName"])|(df["Count_AnimalName"]<1000)])
```

> pymongo

```python
# coding=utf-8
from pymongo import MongoClient
import pandas as pd

client = MongoClient()
collection = client["douban"]["tv1"]
data = collection.find()
data_list = []
for i in data:
    temp = {}
    temp["info"]= i["info"]
    temp["rating_count"] = i["rating"]["count"]
    temp["rating_value"] = i["rating"]["value"]
    temp["title"] = i["title"]
    temp["country"] = i["tv_category"]
    temp["directors"] = i["directors"]
    temp["actors"] = i['actors']
    data_list.append(temp)
# t1 = data[0]
# t1 = pd.Series(t1)
# print(t1)

df = pd.DataFrame(data_list)
# print(df)

#显示头几行
print(df.head(1))
# print("*"*100)
# print(df.tail(2))

#展示df的概览
# print(df.info())
# print(df.describe())
print(df["info"].str.split("/").tolist())
```

## 3. `DataFrame`

> `DataFrame`二维，`Series`容器

### 1.创建

> DataFrame对象既有行索引，又有列索引
>
> 行索引：表明不同行，横向索引，叫index，0轴，axis=0
>
> 列索引：表明不同列，纵向索引，叫columns，1轴，axis=1

```python
import pandas as pd
import numpy as np

pd.DataFrame(np.arange(12).reshape(3,4))
# 打印结果如下
   0  1   2   3
0  0  1   2   3
1  4  5   6   7
2  8  9  10  11

pd.DataFrame(np.arange(12).reshape(3,4),index=list("abc"),columns=list("wxyz"))
# 打印结果如下
   w  x   y   z
a  0  1   2   3
b  4  5   6   7
c  8  9  10  11
```

