# 2. `MySQL`中的编码和数据类型

## 1. 字符集

### 1.  字符集在什么时候可以发挥作用?

```
1. 保存数据的时候需要使用字符集
2. 数据传输的时候也需要使用字符集
3. 在存续的时候使用字符集
1. 在MySQL的服务器上, 在数据库中, 在表的使用上, 在字段的设置上.
2. 在服务器安装的时候, 可以指定默认的字符集
```

### 2. 常见字符集

- `ASCII`: 基于罗马字母表的一套字符集, 它采用1个字节的低7位表示字符, 高位始终为0。
- `LATIN1`: 相对于ASCII字符集做了扩展, 仍然使用一个字节表示字符, 但启用了高位, 扩展了字符集的表示范围。
- `GB2312`: 简体中文字符, 一个汉字最多占用2个字节
- `GB`: 只是所有的中文字符, 一个汉字最多占用2个字节
- `UTF8`: 国际通用编码, 一个汉字最多占用3个字节
- `UTF8MB4`: 国际通用编码, 在`utf8`的基础上加强了对新文字识别, 一个汉字最多占用4个字节

#### 1. 查看当前`mysql`系统支持的字符集

```
show variables like 'character_%';
```

#### 2. 修改当前的 `mysql` 系统的字符集编码

- 全部修改  `set names gbk;`
- 指定修改 `set character_set_client = gbk;`
- 它是临时性命令, `mysql`链接断开以后, 再次连接时会恢复原状

## 2. 校对集

> 在某一种字符集下, 为了使字符之间可以互相比较, 让字符和字符形成一种关系的集合, 称之为校对集。
> 比如说 ASCII 中的 a 和 B, 如果区分大小写 a > B, 如果不区分 a < B;
> 不同字符集有不同的校对规则, 命名约定：以其相关的字符集名开始, 通常包括一个语言名, 并且以_ci 、 _cs 或  _bin 结束。

- `_ci` : 大小写不敏感
- `_cs `: 大小写敏感
- `_bin` : binary collation 二元法, 直接比较字符的编码, 可以认为是区分大小写的, 因为字符集中'A'和'a'的编码显然不同。

## 3. 数据类型

### 1. 数值类型(有符号signed和无符号unsigned)

- #### 整型

  ```
  1、int 大整型(4个字节) 
  	取值范围：0 ~ 2 ** 32 -1(42亿多)
  2、tinyint 微小整型(1个字节)
  	1、有符号(signed默认): -128 ~ 127
  	2、无符号(unsigned): 0 ~ 255
  3、smallint 小整型(2个字节)
  	取值范围：0 ~ 65535
  4、bigint 极大整型(8个字节)
  	取值范围：0 ~ 2 ** 64 - 1
  -----------------------------------
  5、mediumint(3个字节)
  	取值范围: 0 ~ 1677215
  ```

- #### 浮点型

  ```
  1、float(4个字节,最多显示7个有效位)
  	1、用法
  		字段名 float(m,n) m:表示总位数 n:小数位位数
  		salary float(5,2) 取值范围？ -999.99 ~ 999.99
  	2、注意
  		1、浮点型插入整数时会自动补全小数位位数
  		2、小数位如果多于指定的位数,会对指定位的下一位进行四舍五入
  			float(5,2)  -> 23.128 -> 23.13
  2、double(8个字节,最多显示15个有效位)
  	1、用法
  		字段名 double(m,n)
  3、decimal(M+2个字节,最多显示28个有效位)
  	1、用法
  		decimal(28,5)
  ```

### 2. 字符类型

![](G:\千峰教育\笔记\Typora\MySQL\img\1.png)

```
1、char(定长)
	1、取值范围：1 ~ 255
	2、不给定宽度默认为 1 
2、varchar(变长)
	1、取值范围：1 ~ 65535
	2、注意
		1、varchar没有默认宽度,必须给定一个宽度值
			name varchar(20)
3、char 和 varchar 的特点
	1、char
		浪费存储空间,但是性能高
	2、varchar
		节省存储空间,但是性能低
```

### 3. 枚举类型

- #### 定义

  > 字段值只能在列举的范围内选择

- #### `enum`(...) 单选(最多有65535个不同的值)

  ```
  字段名 enum(值1,值2,...,值N)
  ```

- #### set(...) 多选(最多有64个不同的值)

  ```
  字段名 set(值1,值2,...,值N)
  插入记录时 "Python,boy,Mysql"
  ```

### 4. 日期时间类型

![](G:\千峰教育\笔记\Typora\4.MySQL\img\2.png)

- 注意

  1、插入记录时`datetime`字段不给值默认返回NULL
  2、插入记录时`timestamp`字段不给值默认返回系统当前时间

  3、`timestamp`字段范围`1970-1-1 0:0:0~2038-1-19 11:14:07`

### 5. 布尔型

> `mysql`中的`bool`类型也是1和0，写多少数值存什么数值，但是写字符串时会报错。

### 6.  列的属性

- 插入的值是否可以为空
  - null : 是可以为空,默认不写
  - not null : 不可以为空,如果插入的时候,某个字段的值为空,则报错
- default (默认值)
  - 默认值一般是和null做搭配的
- auto_increment
  - 自动增长的列
  - 默认从 1 开始
  - 常配合主键使用的
- primary key
  - 主键一般是唯一的标识
  - 特性:不能为空,也不能重复,一张表当中只可以拥有一个主键
- unique
  - 唯一键,保证列当中的每一个数据都不重复
  - 邮箱不可以重复,手机号不可以重复
- comment
  - 字段说明: 给开发者看的, 一般⽤用来对相应字段进行说明

### 7. `SQL`注释

- 单行注释:  -- 这是单行注释部分
- 多行注释:  /*这里是多行注释部分 */
- `MySQL` 独有的单行注释:  # 这是`MySQL`独有的单行注释

## 4. 运算符操作

### 1. 算术运算符

```
select 123 + 543, 321 * 5, -456 / 2, 10 % 3, 2 / 0, 3 % 0;
/* 输出:
+-----------+---------+-----------+--------+-------+-------+
| 123 + 543 | 321 * 5 | -456 / 2  | 10 % 3 | 2 / 0 | 3 % 0 |
+-----------+---------+-----------+--------+-------+-------+
| 666       | 1605    | -228.0000 | 1      | NULL  | NULL  |
+-----------+---------+-----------+--------+-------+-------+
*/
```

### 2. 比较运算符

![](G:\千峰教育\笔记\Typora\MySQL\img\3.png)

- 常规比较

  ```
  select 1=2, 2<3, 3<=4, 4>5, 5>=3, 8!=9, 8<>9, 'abc' = 'Abc', 'z' > 'a';
  /* 输出:
  +-----+-----+------+-----+------+------+------+---------------+-----------
  | 1=2 | 2<3 | 3<=4 | 4>5 | 5>=3 | 8!=9 | 8<>9 | 'abc' = 'Abc' | 'z' > 'a'
  +-----+-----+------+-----+------+------+------+---------------+-----------
  | 0   | 1   | 1    | 0   | 1    | 1    | 1    |    1          | 1
  +-----+-----+------+-----+------+------+------+---------------+-----------
  */
  ```

- 范围比较

  ```
  select 123 between 100 and 200, 'b' in ('a', 'b', 'c');
  /* 输出
  +-------------------------+------------------------+
  | 123 between 100 and 200 | 'b' in ('a', 'b', 'c') |
  +-------------------------+------------------------+
  |     1                   |       1                |
  +-------------------------+------------------------+
  */
  ```

- Null 比较

  ```
  select 12 is null, 23 = null, null = null, null <=> null, null is null, 32
  is not null;
  /* 输出
  +----------+---------+-----------+-------------+------------+-------------+
  |12 is null|23 = null|null = null|null <=> null|null is null|32is not null|
  +----------+---------+-----------+-------------+------------+-------------+
  |   0      |  NULL   |  NULL     |      1      |      1     |      1      |
  +----------+---------+-----------+-------------+------------+-------------+
  */
  ```

- 模糊比较: like

  ```
  select 'HelloWorld' like 'hello%';
  /* 输出
  +----------------------------+
  | 'HelloWorld' like 'hello%' |
  +----------------------------+
  |             1              |
  +----------------------------+
  *
  ```

### 3. 逻辑运算符

![](G:\千峰教育\笔记\Typora\4.MySQL\img\4.png)

